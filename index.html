<!DOCTYPE html>
<html lang="pt-br">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, viewport-fit=cover"
    />
    <title>Asteroids</title>

    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap"
      rel="stylesheet"
    />

    <link rel="stylesheet" href="./styles.css" />
  </head>

  <body>
    <main class="app">
      <header class="hud">
        <div class="brand">
          <div class="brand-top">
            <span class="badge">ARCADE</span>
            <h1 class="title">ASTEROIDS</h1>
          </div>

          <p class="subtitle">
            <span class="chip">←/→ <span class="muted">girar</span></span>
            <span class="chip">↑ <span class="muted">impulso</span></span>
            <span class="chip">ESPAÇO <span class="muted">tiro</span></span>
            <span class="chip">P/ESC <span class="muted">pausa</span></span>
          </p>
        </div>

        <div class="actions">
          <div class="hud-mini" id="hudMini">
            <div class="hud-mini__row">
              <span class="hud-mini__label">MODO</span>
              <span class="hud-mini__value" id="hudMode">—</span>
            </div>
            <div class="hud-mini__row">
              <span class="hud-mini__label">DIFF</span>
              <span class="hud-mini__value" id="hudDiff">—</span>
            </div>
            <div class="hud-mini__row">
              <span class="hud-mini__label">NÚCLEOS</span>
              <span class="hud-mini__value" id="hudCores">0</span>
            </div>
          </div>

          <button
            id="btnSettings"
            class="btn"
            type="button"
            aria-label="Configurações"
          >
            CONFIG
          </button>
          <button id="btnFullscreen" class="btn" type="button">
            FULLSCREEN
          </button>
        </div>
      </header>

      <section class="cabinet">
        <div class="frame">
          <div class="bezel">
            <canvas
              id="gameCanvas"
              width="700"
              height="500"
              tabindex="0"
            ></canvas>

            <!-- Camadas CRT -->
            <div class="scanlines" aria-hidden="true"></div>
            <div class="vignette" aria-hidden="true"></div>
            <div class="glow-edge" aria-hidden="true"></div>

            <!-- HUD power-ups (DOM) -->
            <div class="powerbar" id="powerbar" aria-hidden="true"></div>
          </div>
        </div>
      </section>

      <footer class="footer">
        <div class="left">
          <small class="hint">
            Clique no jogo pra focar o teclado. Em mobile, os botões aparecem
            automaticamente.
          </small>
        </div>
        <small class="muted">v2.1</small>
      </footer>
    </main>

    <!-- Overlay: Menu / Pause / GameOver / Settings / Skills -->
    <div class="overlay hidden" id="overlay">
      <div
        class="panel hidden"
        id="panelMenu"
        role="dialog"
        aria-modal="true"
        aria-label="Menu"
      >
        <div class="panel__title">ASTEROIDS</div>
        <div class="panel__subtitle">
          Pressione <span class="kbd">ESPAÇO</span> ou clique em “JOGAR”.
        </div>

        <div class="panel__grid">
          <label class="field">
            <span class="field__label">Modo</span>
            <select class="select" id="selMode">
              <option value="classic">Classic</option>
              <option value="time_attack">Time Attack (2:00)</option>
              <option value="one_life">One Life</option>
              <option value="endless">Endless</option>
            </select>
          </label>

          <label class="field">
            <span class="field__label">Dificuldade</span>
            <select class="select" id="selDiff">
              <option value="easy">Fácil</option>
              <option value="normal" selected>Normal</option>
              <option value="hard">Hard</option>
            </select>
          </label>
        </div>

        <div class="panel__row">
          <button class="btn btn--primary" id="btnPlay" type="button">
            JOGAR
          </button>
          <button class="btn" id="btnSkills" type="button">SKILL TREE</button>
          <button class="btn" id="btnShowLeaderboard" type="button">
            RANKING
          </button>
        </div>

        <div class="divider"></div>

        <div class="panel__help">
          <div><span class="kbd">←</span> <span class="kbd">→</span> girar</div>
          <div><span class="kbd">↑</span> impulso</div>
          <div><span class="kbd">ESPAÇO</span> atirar</div>
          <div>
            <span class="kbd">P</span>/<span class="kbd">ESC</span> pausa
          </div>
          <div><span class="kbd">F</span> FPS (dev)</div>
        </div>

        <div class="leaderboard hidden" id="leaderboard">
          <div class="leaderboard__title">TOP 10 (local)</div>
          <ol class="leaderboard__list" id="leaderboardList"></ol>
        </div>

        <div class="panel__foot">
          <small class="muted"
            >Dica: o áudio só começa depois que você iniciar (política do
            browser).</small
          >
        </div>
      </div>

      <div
        class="panel hidden"
        id="panelPause"
        role="dialog"
        aria-modal="true"
        aria-label="Pausa"
      >
        <div class="panel__title">PAUSADO</div>
        <div class="panel__subtitle">
          Pressione <span class="kbd">P</span> ou
          <span class="kbd">ESC</span> pra voltar.
        </div>

        <div class="panel__row">
          <button class="btn btn--primary" id="btnResume" type="button">
            CONTINUAR
          </button>
          <button class="btn" id="btnRestart" type="button">REINICIAR</button>
          <button class="btn" id="btnQuit" type="button">MENU</button>
        </div>
      </div>

      <div
        class="panel hidden"
        id="panelGameOver"
        role="dialog"
        aria-modal="true"
        aria-label="Fim de jogo"
      >
        <div class="panel__title" id="gameOverTitle">GAME OVER</div>
        <div class="panel__subtitle" id="gameOverStats">—</div>

        <div class="panel__row">
          <button class="btn btn--primary" id="btnAgain" type="button">
            JOGAR DE NOVO
          </button>
          <button class="btn" id="btnBackMenu" type="button">MENU</button>
        </div>

        <div class="rewards" id="rewards">
          <div class="rewards__title">RECOMPENSAS</div>
          <div class="rewards__row">
            <span>Núcleos obtidos nesta run</span>
            <strong id="runCores">0</strong>
          </div>
          <ul class="rewards__list" id="runCoresBreakdown"></ul>
        </div>

        <div class="leaderboard" id="leaderboardGameOver">
          <div class="leaderboard__title">TOP 10 (local)</div>
          <ol class="leaderboard__list" id="leaderboardList2"></ol>
        </div>
      </div>

      <div
        class="panel hidden"
        id="panelSettings"
        role="dialog"
        aria-modal="true"
        aria-label="Configurações"
      >
        <div class="panel__title">CONFIGURAÇÕES</div>

        <div class="settings">
          <label class="toggle">
            <input type="checkbox" id="chkMusic" />
            <span>Música</span>
          </label>

          <label class="toggle">
            <input type="checkbox" id="chkSfx" />
            <span>SFX</span>
          </label>

          <label class="field">
            <span class="field__label">Volume Música</span>
            <input
              class="range"
              id="rngMusic"
              type="range"
              min="0"
              max="1"
              step="0.01"
            />
          </label>

          <label class="field">
            <span class="field__label">Volume SFX</span>
            <input
              class="range"
              id="rngSfx"
              type="range"
              min="0"
              max="1"
              step="0.01"
            />
          </label>

          <label class="toggle">
            <input type="checkbox" id="chkReduceFlashes" />
            <span>Reduzir flashes / shake</span>
          </label>

          <label class="toggle">
            <input type="checkbox" id="chkTouch" />
            <span>Controles touch (forçar)</span>
          </label>
        </div>

        <div class="panel__row">
          <button class="btn btn--primary" id="btnCloseSettings" type="button">
            FECHAR
          </button>
        </div>

        <small class="muted">
          Observação: se você não tiver <code>sounds/siren.m4a</code>, o UFO
          funciona sem sirene.
        </small>
      </div>

      <div
        class="panel hidden"
        id="panelSkills"
        role="dialog"
        aria-modal="true"
        aria-label="Skill Tree"
      >
        <div class="panel__title">SKILL TREE</div>
        <div class="panel__subtitle">
          Núcleos são raros. Você ganha poucos por run — e pode ativar
          <b>Contratos</b> para aumentar dificuldade e recompensa.
        </div>

        <div class="skillsTop">
          <div class="skillsCurrency">
            <span class="skillsCurrency__label">NÚCLEOS</span>
            <span class="skillsCurrency__value" id="skillsCores">0</span>
          </div>

          <div class="skillsLegend">
            <span class="legendDot legendDot--on"></span> Desbloqueado
            <span class="legendDot legendDot--off"></span> Bloqueado
            <span class="legendDot legendDot--ok"></span> Disponível
          </div>
        </div>

        <div class="skillsLayout">
          <div class="skillsTreeWrap">
            <svg class="skillsLines" id="skillsLines" aria-hidden="true"></svg>
            <div class="skillsGrid" id="skillsGrid"></div>
          </div>

          <aside class="skillsSide">
            <div class="skillsCard">
              <div class="skillsCard__title" id="skillTitle">
                Selecione uma habilidade
              </div>
              <div class="skillsCard__desc" id="skillDesc">
                Clique em um nó para ver detalhes.
              </div>

              <div class="skillsCard__meta">
                <div>
                  <span class="muted">Custo:</span> <b id="skillCost">—</b>
                </div>
                <div>
                  <span class="muted">Tipo:</span> <b id="skillType">—</b>
                </div>
              </div>

              <button
                class="btn btn--primary"
                id="btnUnlockSkill"
                type="button"
                disabled
              >
                DESBLOQUEAR
              </button>
              <small class="muted" id="skillHint">—</small>
            </div>

            <div class="skillsCard">
              <div class="skillsCard__title">EFEITOS ATIVOS</div>
              <div class="skillsCard__desc" id="activeMods">—</div>
            </div>

            <div class="panel__row">
              <button class="btn" id="btnCloseSkills" type="button">
                FECHAR
              </button>
            </div>
          </aside>
        </div>
      </div>
    </div>

    <!-- Controles touch -->
    <div class="touch hidden" id="touch">
      <div class="touch__left">
        <button class="touch__btn" id="btnLeft" aria-label="Girar esquerda">
          ⟵
        </button>
        <button class="touch__btn" id="btnRight" aria-label="Girar direita">
          ⟶
        </button>
      </div>
      <div class="touch__right">
        <button
          class="touch__btn touch__btn--big"
          id="btnThrust"
          aria-label="Impulso"
        >
          ▲
        </button>
        <button
          class="touch__btn touch__btn--big touch__btn--fire"
          id="btnFire"
          aria-label="Atirar"
        >
          ●
        </button>
      </div>
    </div>

    <script src="./game.js"></script>
  </body>
</html>
